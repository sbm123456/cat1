import{defineComponent as F,computed as v,resolveComponent as m,openBlock as o,createBlock as n,withCtx as h,unref as t,createVNode as r,toDisplayString as p,createCommentVNode as f,pushScopeId as w,popScopeId as O,Fragment as j,createTextVNode as D,renderList as z}from"../vue.js";import{stats as l,profile as b,meta as k}from"../client.js";const I={key:1};var L=F({setup(_){const s=v(()=>({tooltip:{trigger:"item",formatter({data:u}){const e=[u.name];return e.push(`\u65E5\u5747\u8C03\u7528\uFF1A${u.value}`),e.join("<br>")}},series:[{type:"pie",data:Object.entries(l.value.commands).sort((u,e)=>e[1]-u[1]).map(([u,e])=>({name:u,value:e})),radius:["35%","65%"],minShowLabelAngle:3}]}));return(u,e)=>{const a=m("k-chart"),c=m("k-card");return o(),n(c,{class:"frameless",title:"\u6307\u4EE4\u8C03\u7528\u9891\u7387"},{default:h(()=>[Object.keys(t(l).commands).length?(o(),n(a,{key:0,option:t(s),autoresize:""},null,8,["option"])):(o(),n("p",I,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1})}}});const N={key:1};var P=F({setup(_){const s=v(()=>({tooltip:{trigger:"item",formatter({data:u,value:e}){const a=[u.name];return a.push(`\u5E73\u53F0\uFF1A${u.platform}`),u.memberCount&&a.push(`\u4EBA\u6570\uFF1A${u.memberCount}`),u.assignee&&a.push(`\u63A5\u5165\uFF1A${u.assignee}`),a.push(`\u65E5\u5747\u53D1\u8A00\uFF1A${+e.toFixed(1)}`),a.push(`\u6628\u65E5\u53D1\u8A00\uFF1A${+u.last.toFixed(1)}`),a.join("<br>")}},series:[{type:"pie",data:l.value.groups.sort((u,e)=>e.value-u.value),radius:["35%","65%"],minShowLabelAngle:3}]}));return(u,e)=>{const a=m("k-chart"),c=m("k-card");return o(),n(c,{class:"frameless",title:"\u5404\u7FA4\u53D1\u8A00\u6570\u91CF"},{default:h(()=>[t(l).groups.length?(o(),n(a,{key:0,option:t(s),autoresize:""},null,8,["option"])):(o(),n("p",N,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1})}}});const R={key:1};var V=F({setup(_){const s="\u65E5\u4E00\u4E8C\u4E09\u56DB\u4E94\u516D",u=v(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter([{name:e,value:a}]){const c=new Date(e).getDay();return`${e} \u661F\u671F${s[c]}<br>\u53D1\u8A00\u6570\u91CF\uFF1A${a}`}},xAxis:{type:"category",data:Object.keys(l.value.history).reverse()},yAxis:{type:"value",axisLabel:{formatter:e=>e/1e3+"k"}},series:{type:"line",smooth:!0,data:Object.values(l.value.history).reverse()}}));return(e,a)=>{const c=m("k-chart"),d=m("k-card");return o(),n(d,{class:"frameless",title:"\u5386\u53F2\u53D1\u8A00\u6570\u91CF"},{default:h(()=>[Object.keys(t(l).history).length?(o(),n(c,{key:0,option:t(u),autoresize:""},null,8,["option"])):(o(),n("p",R,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1})}}}),q=F({setup(_){const s=e=>`${(e-.5).toFixed()}:00-${(e+.5).toFixed()}:00`,u=v(()=>({tooltip:{trigger:"axis",axisPointer:{type:"cross"},formatter(e){const[{data:[a],dataIndex:c,color:d}]=e,i=l.value.hours[c],g=[`${s(a)}`,`\u6D88\u606F\u603B\u91CF\uFF1A${+(i.total||0).toFixed(1)}`];return e.reverse().forEach(({seriesName:y,color:A,data:[E,C],marker:x},B)=>{const S=B===0?i.command:B===1?i.dialogue:Math.max(0,i.total-i.command-i.dialogue);!S||g.push(`${x}${y}\uFF1A${+S.toFixed(1)}`)}),g.join("<br>")}},xAxis:{type:"value",min:0,max:24,minInterval:1,maxInterval:4,axisLabel:{formatter:e=>e+":00"},axisPointer:{label:{formatter:({value:e})=>s(e)}}},yAxis:{type:"value"},series:[{name:"\u5176\u4ED6",data:l.value.hours.map((e,a)=>[a+.5,e.total||0]),type:"bar",stack:1,itemStyle:{color:"rgb(255,219,92)"}},{name:"\u6559\u5B66",data:l.value.hours.map((e,a)=>[a+.5,(e.command||0)+(e.dialogue||0)]),type:"bar",stack:1,itemStyle:{color:"rgb(103,224,227)"}},{name:"\u6307\u4EE4",data:l.value.hours.map((e,a)=>[a+.5,e.command||0]),type:"bar",stack:1,itemStyle:{color:"rgb(55,162,218)"}}]}));return(e,a)=>{const c=m("k-chart"),d=m("k-card");return o(),n(d,{class:"frameless",title:"\u6BCF\u5C0F\u65F6\u53D1\u8A00\u6570\u91CF"},{default:h(()=>[r(c,{option:t(u),autoresize:""},null,8,["option"])]),_:1})}}});w("data-v-3e393dfd");const G={class:"load-bar"},H={class:"title"},M={class:"body"},U={key:0,class:"caption"},K={key:0,class:"caption"},T={key:0,class:"caption"};O();var $=F({props:{rate:{type:null,required:!0},title:{type:String,required:!0}},setup(_){const s=_;function u(d,i=3){return(d*100).toFixed(i)+"%"}const e=["used","app","free"],a=v(()=>{const d=[s.rate[1]-s.rate[0],s.rate[0],1-s.rate[1]],i=d.indexOf(Math.max(...d));return e[i]}),c=v(()=>`${u(s.rate[0],1)} / ${u(s.rate[1],1)}`);return(d,i)=>(o(),n("div",G,[r("span",H,p(_.title),1),r("span",M,[r("span",{class:"used bar",style:{width:u(_.rate[1]-_.rate[0])}},[t(a)==="used"?(o(),n("span",U,p(t(c)),1)):f("v-if",!0)],4),r("span",{class:"app bar",style:{width:u(_.rate[0])}},[t(a)==="app"?(o(),n("span",K,p(t(c)),1)):f("v-if",!0)],4),t(a)==="free"?(o(),n("span",T,p(t(c)),1)):f("v-if",!0)])]))}}),ce=`.load-bar[data-v-3e393dfd] {
  display: flex;
  align-items: center;
  user-select: none;
}
.load-bar .title[data-v-3e393dfd] {
  min-width: 3rem;
}
.load-bar .body[data-v-3e393dfd] {
  width: 100%;
  height: 1.2rem;
  position: relative;
  display: inline;
  background-color: #474d84;
  border-radius: 4px;
  overflow: hidden;
}
.load-bar .bar[data-v-3e393dfd] {
  height: 100%;
  position: relative;
  float: left;
  transition: 0.3s ease;
}
.load-bar .used[data-v-3e393dfd] {
  background-color: #2477ff;
  color: white;
}
.load-bar .used[data-v-3e393dfd]:hover {
  background-color: #5797ff;
}
.load-bar .app[data-v-3e393dfd] {
  background-color: #e49400;
}
.load-bar .app[data-v-3e393dfd]:hover {
  background-color: #ffae18;
}
.load-bar .caption[data-v-3e393dfd] {
  left: 1rem;
  position: relative;
}
.load-bar + .load-bar[data-v-3e393dfd] {
  margin-top: 0.6rem;
}`;$.__scopeId="data-v-3e393dfd";var J=F({setup(_){return(s,u)=>{const e=m("k-card");return o(),n(e,{class:"load-chart",title:"\u8D1F\u8F7D\u72B6\u6001"},{default:h(()=>[r($,{title:"CPU",rate:t(b).cpu},null,8,["rate"]),r($,{title:"\u5185\u5B58",rate:t(b).memory},null,8,["rate"])]),_:1})}}});const Q={class:"card-grid profile-grid"},W={key:0},X=r("th",null,"\u5E73\u53F0\u540D",-1),Y=r("th",null,"\u7528\u6237\u540D",-1),Z=r("th",null,"\u8FD0\u884C\u72B6\u6001",-1),ee=r("th",null,"\u5F53\u524D\u6D88\u606F\u9891\u7387",-1),te={key:0},ue={key:0},ae={key:1},oe={key:0,class:"card-grid chart-grid"};var ne=F({setup(_){const s=KOISHI_CONFIG,u=["\u8FD0\u884C\u4E2D","\u95F2\u7F6E","\u79BB\u7EBF","\u7F51\u7EDC\u5F02\u5E38","\u670D\u52A1\u5668\u5F02\u5E38","\u5C01\u7981\u4E2D","\u5C1D\u8BD5\u8FDE\u63A5"],e=v(()=>b.value.bots.reduce((c,d)=>c+d.currentRate[0],0)),a=v(()=>Object.values(l.value.botSend).reduce((c,d)=>c+d,0).toFixed(1));return(c,d)=>{const i=m("k-numeric"),g=m("k-card");return o(),n(j,null,[r("div",Q,[r(i,{title:"\u5F53\u524D\u6D88\u606F\u9891\u7387",icon:"paper-plane"},{default:h(()=>[D(p(t(e))+" / min",1)]),_:1}),t(s).database?(o(),n(i,{key:0,title:"\u8FD1\u671F\u6D88\u606F\u9891\u7387",icon:"history"},{default:h(()=>[D(p(t(a))+" / d",1)]),_:1})):f("v-if",!0),t(k)?(o(),n(i,{key:1,title:"\u6570\u636E\u5E93\u4F53\u79EF",icon:"database",type:"size",value:t(k).storageSize,fallback:"\u672A\u5B89\u88C5"},null,8,["value"])):f("v-if",!0),r(i,{title:"\u8D44\u6E90\u670D\u52A1\u5668",icon:"hdd",type:"size",value:t(k).assetSize,fallback:"\u672A\u5B89\u88C5"},null,8,["value"]),t(s).database?(o(),n(i,{key:2,title:"\u6D3B\u8DC3\u7528\u6237\u6570\u91CF",icon:"heart"},{default:h(()=>[D(p(t(k).activeUsers),1)]),_:1})):f("v-if",!0),t(s).database?(o(),n(i,{key:3,title:"\u6D3B\u8DC3\u7FA4\u6570\u91CF",icon:"users"},{default:h(()=>[D(p(t(k).activeGroups),1)]),_:1})):f("v-if",!0)]),r(J),r(g,{class:"bot-table",title:"\u8D26\u53F7\u6570\u636E"},{default:h(()=>[t(b).bots.length?(o(),n("table",W,[r("tr",null,[X,Y,Z,ee,t(l)?(o(),n("th",te,"\u8FD1\u671F\u6D88\u606F\u9891\u7387")):f("v-if",!0)]),(o(!0),n(j,null,z(t(b).bots,({platform:y,username:A,selfId:E,code:C,currentRate:x})=>(o(),n("tr",null,[r("td",null,p(y),1),r("td",null,p(A),1),r("td",null,p(u[C]),1),r("td",null,"\u53D1\u9001 "+p(x[0])+"/min\uFF0C\u63A5\u6536 "+p(x[1])+"/min",1),t(l)?(o(),n("td",ue,"\u53D1\u9001 "+p(t(l).botSend[`${y}:${E}`]||0)+"/d\uFF0C\u63A5\u6536 "+p(t(l).botReceive[`${y}:${E}`]||0)+"/d",1)):f("v-if",!0)]))),256))])):(o(),n("p",ae,"\u6682\u65E0\u6570\u636E\u3002"))]),_:1}),t(s).database?(o(),n("div",oe,[r(V),r(q),r(P),r(L)])):f("v-if",!0)],64)}}}),ie="";export default ne;
